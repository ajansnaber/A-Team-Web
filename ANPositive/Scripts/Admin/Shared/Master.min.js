"use strict";moment.locale("tr");var images=[],table,application={name:appName,form:{sendAjax:function(n,t,i,r){$(".ibox-content").toggleClass("sk-loading");$.ajax({type:"POST",url:t,data:JSON.stringify(n),contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){var t=n.result;t.success?(toastr.success(t.message),i?setTimeout(function(){window.location.href=r},5e3):$(".ibox-content").toggleClass("sk-loading")):toastr.error(t.message)},error:function(){console.log("Bir sorun oluştu. Lütfen daha sonra tekrar deneyin.")}})},verify:function(n,t,i,r){var u=!1,f,e="",o,s;switch(r){case"phone":application.form.verifyFunc.text(parseInt($(n).data("minlength")),i)?$("div."+t).removeClass("has-error").addClass("has-success"):(u||(f=$(n)),$("div."+t).addClass("has-error"),e+='<p><i class="fa fa-exclamation"><\/i> '+$(n).data("errormsg")+"<\/p>",u=!0);break;case"image":application.form.verifyFunc.image()?$("div."+t).removeClass("has-error").addClass("has-success"):(u||(f=$(n)),$("div."+t).addClass("has-error"),e+='<p><i class="fa fa-exclamation"><\/i> '+$(n).data("errormsg")+"<\/p>",u=!0);break;case"url":application.form.verifyFunc.url(i)?$("div."+t).removeClass("has-error").addClass("has-success"):(u||(f=$(n)),$("div."+t).addClass("has-error"),e+='<p><i class="fa fa-exclamation"><\/i> '+$(n).data("errormsg")+"<\/p>",u=!0);break;case"array":application.form.verifyFunc.array(i)?$("div."+t).removeClass("has-error").addClass("has-success"):(u||(f=$(n)),$("div."+t).addClass("has-error"),e+='<p><i class="fa fa-exclamation"><\/i> '+$(n).data("errormsg")+"<\/p>",u=!0);break;case"email":application.form.verifyFunc.email(i)?$("div."+t).removeClass("has-error").addClass("has-success"):(u||(f=$(n)),$("div."+t).addClass("has-error"),e+='<p><i class="fa fa-exclamation"><\/i> '+$(n).data("errormsg")+"<\/p>",u=!0);break;case"date":application.form.verifyFunc.date(i)?$("div."+t).removeClass("has-error").addClass("has-success"):(u||(f=$(n)),$("div."+t).addClass("has-error"),e+='<p><i class="fa fa-exclamation"><\/i> '+$(n).data("errormsg")+"<\/p>",u=!0);break;case"password":o=$(n).val();s=$("#"+$(n).data("target")).val();application.form.verifyFunc.password(o)?application.form.verifyFunc.passwordIsEqual(o,s)?$("div."+t).removeClass("has-error").addClass("has-success"):(u||(f=$(n)),$("div."+t).addClass("has-error"),e+='<p><i class="fa fa-exclamation"><\/i> '+$("#"+$(n).data("target")).data("errormsg")+"<\/p>",u=!0):(u||(f=$(n)),$("div."+t).addClass("has-error"),e+='<p><i class="fa fa-exclamation"><\/i> '+$(n).data("errormsg")+"<\/p>",u=!0);break;case"username":application.form.verifyFunc.username(i)?$("div."+t).removeClass("has-error").addClass("has-success"):(u||(f=$(n)),$("div."+t).addClass("has-error"),e+='<p><i class="fa fa-exclamation"><\/i> '+$(n).data("errormsg")+"<\/p>",u=!0);break;case"money":application.form.verifyFunc.money(i)?$("div."+t).removeClass("has-error").addClass("has-success"):(u||(f=$(n)),$("div."+t).addClass("has-error"),e+='<p><i class="fa fa-exclamation"><\/i> '+$(n).data("errormsg")+"<\/p>",u=!0);break;default:i=$(n).data("element")==="ckeditor"?CKEDITOR.instances.body.getData():i;application.form.verifyFunc.text(parseInt($(n).data("minlength")),i)?$("div."+t).removeClass("has-error").addClass("has-success"):(u||(f=$(n)),$("div."+t).addClass("has-error"),e+='<p><i class="fa fa-exclamation"><\/i> '+$(n).data("errormsg")+"<\/p>",u=!0)}return{error:u,focus:f,message:[e]}},formatValues:function(n){return $(n).data("element")==="multiple"?$(n).val().toString():$(n).data("element")==="ckeditor"?CKEDITOR.instances.body.getData():$(n).data("element")==="date"?$(n).data("datepicker").getFormattedDate("yyyy-mm-dd"):$(n).data("element")==="phone"?$(n).cleanVal():$(n).data("element")==="password"||$(n).data("element")==="passwordAgain"?application.tools.cryptoPassword($(n).val()):$(n).data("element")==="money"?$(n).autoNumeric("get"):$(n).data("element")==="digit"?$(n).autoNumeric("get"):$(n).val()},verifyFunc:{email:function(n){var t=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);return t.test(n)},text:function(n,t){return t===undefined||t===null||t.length<n||t===""?!1:!0},image:function(){return images.length===0?!1:!0},url:function(n){var t=new RegExp(/((http|https)\:\/\/)?[a-zA-Z0-9\.\/\?\:@\-_=#]+\.([a-zA-Z0-9\.\/\?\:@\-_=#])*/);return t.test(n)},date:function(n){var t=moment(n,"D.M.YYYY");return t===null||!t.isValid()||t==="undefined"?!1:n.indexOf(t.format("D.M.YYYY"))>=0||n.indexOf(t.format("DD.MM.YYYY"))>=0||n.indexOf(t.format("D.M.YY"))>=0||n.indexOf(t.format("DD.MM.YY"))>=0},password:function(n){var t=new RegExp(/^(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\d\W])|(?=.*\W)(?=.*\d))|(?=.*\W)(?=.*[A-Z])(?=.*\d)).{8,}$/i);return t.test(n)},passwordIsEqual:function(n,t){return n===t?!0:!1},username:function(n){var t=new RegExp(/^[-\w\.\$@\*\!]{1,30}$/i);return t.test(n)},money:function(n){var t=new RegExp(/^\d+(?:\.\d{0,2})$/);return t.test(n)},array:function(n){return Array.isArray(n)&&n.length>0?!0:!1}}},listImages:{singleFileList:function(n,t){images.length===1&&($(".uploadFile").toggleClass("hide"),$(".fileIsUploaded ").toggleClass("hide"),$(".showUploadedFile").html('<a href="/uploads/'+n+"/"+images[0]+'" title="'+t+'" data-fancybox="gallery"><i class="fa fa-picture-o"><\/i> Görseli Görüntüle<\/a>'))},galleryList:function(){},resetImages:function(){images=[];$(".uploadFile").toggleClass("hide");$(".fileIsUploaded ").toggleClass("hide");$(".showUploadedFile").html(null)}},plugins:{load:function(){if($("body").append('<div id="goToUp" class="btn btn-info"><span class="fa fa-arrow-circle-up fa-2x"><\/span><\/div>'),$(window).scroll(function(){$(this).scrollTop()!==0?$("#goToUp").fadeIn():$("#goToUp").fadeOut()}),$("#goToUp").click(function(){return $("html, body").animate({scrollTop:0},"slow"),!1}),$(".maxlength").length>=1&&$(".maxlength").maxlength({placement:"top",alwaysShow:!1,threshold:5,warningClass:"label label-success",limitReachedClass:"label label-danger",separator:". karakteri yazıyorsunuz. Bu alan en fazla",preText:"",postText:" karakter olabilir.",validate:!0}),$("input.money").length>=1&&$("input.money").autoNumeric("init",{digitGroupSeparator:".",decimalCharacter:","}),$("input.digit").length>=1&&$("input.digit").autoNumeric("init",{mDec:0}),$("input.onlynumeric").length>=1&&$("input.onlynumeric").numeric(),$(".phonemask").length>=1&&$(".phonemask").mask("(000) 000-0000"),$("select.select2-multiple").length>=1&&$("select.select2-multiple").select2({minimumResultsForSearch:1,tags:!0,language:"tr-TR"}),$("select.select2-single").length>=1&&$("select.select2-single").select2({language:"tr-TR"}),$("input.autocomplete").length>=1)$("input.autocomplete").on("focus",function(){var n=parseInt($(this).width())+26;$(this).devbridgeAutocomplete({serviceUrl:"/Admin/Api/Auto-Complete?tableName="+$(this).data("tablename")+"&columnName="+$(this).data("columnname"),minChars:2,width:n,formatResult:function(n){return n.value}})});$("#form input[type=text]").length>0&&$("#form input[type=text]").prop("autocomplete","off");$(".datepicker").length>=1&&$(".datepicker").attr("placeholder","__.__.____").datepicker({format:"dd.mm.yyyy",weekStart:1,language:"tr",orientation:"bottom left",todayHighlight:!0,autoclose:!0});$("#form").find("[data-element='il']").length&&($("#iladi").addClass("formelement"),$.when($.getJSON("/il-ilce.json",function(){})).done(function(n){var i=n.illerilceler,t=$("#il"),r=$("#ilce");t.empty();$.each(i,function(n,i){t.find("option").filter("[value='"+i.plaka+"']").length||t.append($("<option><\/option>").attr("value",i.plaka).text(i.il))});t.change(function(){var n=$(this).val(),u=i.filter(function(t){return t.plaka===n}).sort(function(n,t){return n.ilce>t.ilce?1:n.ilce<t.ilce?-1:0});$("#iladi").val(t.find("option").filter("[value='"+n+"']").text());r.empty();$.each(u,function(n,t){r.append($("<option><\/option>").attr("value",t.ilce).text(t.ilce))})});setTimeout(function(){t.val(35).change()},100)}));$("#fileupload").length>=1&&$("#fileupload").fileupload({dataType:"json",disableImageResize:/Android(?!.*Chrome)|Opera/.test(window.navigator&&navigator.userAgent),imageMaxWidth:uploadParameters.imageMaxWidth,imageMaxHeight:uploadParameters.imageMaxHeight,imageCrop:uploadParameters.imageCrop}).bind("fileuploaddestroyed",function(n,t){var r=t.context.find("a[download]").attr("download"),i=images.indexOf(r);i!==-1&&images.splice(i,1)}).bind("fileuploaddone",function(n,t){$.each(t.result.files,function(n,t){var i=images.indexOf(t.name);i===-1&&images.push(t.name);uploadParameters.singleFile?application.listImages.singleFileList(uploadParameters.uploadFolder,uploadParameters.uploadTitle):application.listImages.galleryList(uploadParameters.uploadFolder,uploadParameters.uploadTitle)})});String.prototype.formatUnicorn=String.prototype.formatUnicorn||function(){var n=this.toString(),t,i,r;if(arguments.length){t=typeof arguments[0];r="string"===t||"number"===t?Array.prototype.slice.call(arguments):arguments[0];for(i in r)n=n.replace(new RegExp("\\{"+i+"\\}","gi"),r[i])}return n}}}};$(document).ready(function(){application.plugins.load()});